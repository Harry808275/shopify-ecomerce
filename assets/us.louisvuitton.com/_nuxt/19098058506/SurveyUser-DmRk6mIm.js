const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./layout-DywyNxr9.js","./rollup-vendor-Csqo9Ap5.js","./nuxt-comp-BrT_0Nqp.js"])))=>i.map(i=>d[i]);
(function(){"use strict";(function(e){try{if(e.includes("/static_lvfront/")&&(e=e.replace(/(..\/)+static_lvfront/g,`${window.location.origin}/static_lvfront`)),Array.from(document.head.getElementsByTagName("style")).map(t=>t.innerText).some(t=>t==e))return;if(typeof document<"u"){const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}}catch(t){console.error("Css injection error",t)}})(`.lv-survey-user__iframe{height:95%;width:100%}[dir] .lv-survey-user__iframe{border:none;padding:0}.lv-survey-user__thank-section{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center}[dir] .lv-survey-user__thank-section{text-align:center}.lv-survey-user__thank-section .lv-icon{height:1.5rem;width:1.5rem}[dir] .lv-survey-user__modal .lv-modal__content{margin:-30px}[dir] .lv-survey-user__modal .lv-modal__content>:last-child{padding-bottom:0}
.lv-product{min-height:100vh}.lv-product__purchase{opacity:0}[dir] .lv-product__purchase{transition:opacity .3s cubic-bezier(.39,.575,.565,1)}.lv-product__purchase.-calculated.-loaded{opacity:1}.lv-product__purchase.-calculated.-loaded:has(.lv-button.-primary){bottom:calc(var(--height)*-1 - -3.75rem);position:sticky}@media screen and (min-width:64rem){.lv-product__purchase{opacity:1}.lv-product__purchase.-calculated.-loaded:has(.lv-button.-primary){bottom:auto;position:relative}}.lv-product__oob-icon{color:#294883;height:.875rem;width:.875rem}.lv-product__interactions{align-items:center;display:flex;gap:1rem;justify-content:flex-end;position:absolute;top:0}[dir=ltr] .lv-product__interactions{right:0}[dir=rtl] .lv-product__interactions{left:0}[dir] .lv-product__interactions .lv-product-add-to-wishlist__button{margin:-.5rem}[dir] .lv-product__interactions .lv-button.-only-icon{padding:.5rem}.lv-product__interactions.-is-oob{align-items:flex-end;flex-direction:column;gap:.5rem}[dir] .lv-product__quantity{border-bottom:1px solid #e1e1e1}[dir] .lv-product__size-guide{margin:1rem 0 0}.lv-product__kitting-perso{align-items:center;display:flex;gap:1.5rem;justify-content:space-between}[dir] .lv-product__kitting-title{margin:0}[dir] .lv-product .lv-product-refill-button,[dir] .lv-product .lv-product-virtual-studio{margin:.5rem 0 0}[dir] .lv-product__locate-in-store .lv-button{background:transparent}[dir] .lv-product__locate-in-store+*>.lv-product-purchase__description-flex{margin-top:0}.lv-product__head{position:relative}.lv-product__commercial-tag{color:inherit;color:#767676;font-size:.875rem;font-weight:400;letter-spacing:.025rem;line-height:1rem}[dir] .lv-product__commercial-tag{margin-bottom:.25rem;margin-top:1rem}.lv-product__commercial-tag:lang(ko),.lv-product__commercial-tag:lang(zh){font-size:.7875rem}.lv-product__commercial-tag:lang(ja){font-size:.7rem}.lv-product__commercial-tag:lang(ja),.lv-product__commercial-tag:lang(ko),.lv-product__commercial-tag:lang(th),.lv-product__commercial-tag:lang(zh){font-style:normal;letter-spacing:0;line-height:normal}.lv-product__commercial-tag:lang(th){word-break:break-word}.lv-product__commercial-tag:lang(vi){line-height:1.3}.lv-product__sections{position:relative}[dir] .lv-product__sections{background:#fff;margin:0}.lv-product__perso-buttons{display:flex;flex-direction:column;gap:1rem}.lv-product__sku-wrapper{align-items:center;display:flex}[dir] .lv-product__sku-wrapper{margin:0 0 .25rem}[dir=ltr] .lv-product__sku-wrapper .lv-icon{margin-right:.5rem}[dir=rtl] .lv-product__sku-wrapper .lv-icon{margin-left:.5rem}.lv-product__sku{display:block}.lv-product__long-sku:before{content:"";display:inline-block;height:.625rem;position:relative;width:.0625rem}[dir] .lv-product__long-sku:before{background-color:#000;margin:0 .5rem}[dir=ltr] .lv-product__long-sku:before{left:0}[dir=rtl] .lv-product__long-sku:before{right:0}.lv-product__name{text-transform:none}[dir] .lv-product__name{margin:0 0 .25rem}[dir] .lv-product__panels{margin-top:1rem}[dir] .lv-product__panels div:first-child .lv-product-panel__button{border-bottom:1px solid #e1e1e1}[dir] .lv-product__panels div:not(:first-child) .lv-product-panel__button{border-top:none}[dir] .lv-product__panels div:last-child .lv-product-panel__button{border-bottom:none}@media screen and (min-width:64rem){.lv-product__panels{-moz-column-gap:1rem;column-gap:1rem;display:flex}[dir] .lv-product__panels div:first-child .lv-product-panel__button{border-bottom:none}}[dir] .lv-product__section{background:#fff}[dir] .lv-product__section-title{margin:0 0 1.5rem}@media screen and (min-width:64rem){[dir] .lv-product__section-title{margin-bottom:2rem}}.lv-product__section .-square-ratio{display:block;overflow:hidden;position:relative;width:100%}.lv-product__section .-square-ratio:before{content:"";display:block;width:100%}[dir] .lv-product__section .-square-ratio:before{padding-top:100%}.lv-product__section .-square-ratio>:not(button):not(.lv-loader):not(.lv-nosized){position:absolute;top:0;width:100%}[dir] .lv-product__section .-square-ratio>:not(button):not(.lv-loader):not(.lv-nosized){left:0;right:0}.lv-product__section .-square-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{top:50%}[dir] .lv-product__section .-square-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{transform:translateY(-50%)}.lv-product__section .-portrait-ratio{display:block;overflow:hidden;position:relative;width:100%}.lv-product__section .-portrait-ratio:before{content:"";display:block;width:100%}[dir] .lv-product__section .-portrait-ratio:before{padding-top:125%}.lv-product__section .-portrait-ratio>:not(button):not(.lv-loader):not(.lv-nosized){position:absolute;top:0;width:100%}[dir] .lv-product__section .-portrait-ratio>:not(button):not(.lv-loader):not(.lv-nosized){left:0;right:0}.lv-product__section .-portrait-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{top:50%}[dir] .lv-product__section .-portrait-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{transform:translateY(-50%)}.lv-product__section .-landscape-ratio{display:block;overflow:hidden;position:relative;width:100%}.lv-product__section .-landscape-ratio:before{content:"";display:block;width:100%}[dir] .lv-product__section .-landscape-ratio:before{padding-top:56.27462%}.lv-product__section .-landscape-ratio>:not(button):not(.lv-loader):not(.lv-nosized){position:absolute;top:0;width:100%}[dir] .lv-product__section .-landscape-ratio>:not(button):not(.lv-loader):not(.lv-nosized){left:0;right:0}.lv-product__section .-landscape-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{top:50%}[dir] .lv-product__section .-landscape-ratio>:not(button):not(.lv-loader):not(.lv-nosized).-v-align{transform:translateY(-50%)}[dir] .lv-product__section.-detailed{margin-top:2rem!important}@media screen and (min-width:64rem){.lv-product__section.-detailed{display:flex;justify-content:space-between}[dir] .lv-product__section.-detailed{margin-top:5rem}}[dir] .lv-product__section.-exclu-services{padding:2rem .5rem}.lv-product__section.-exclu-services .lv-product__section-title{box-sizing:border-box}[dir] .lv-product__section.-exclu-services .lv-product__section-title{padding-left:6.4vw;padding-right:6.4vw}@media screen and (min-width:48rem){[dir] .lv-product__section.-exclu-services .lv-product__section-title{padding-left:3.125vw;padding-right:3.125vw}}@media screen and (min-width:64rem){[dir] .lv-product__section.-exclu-services .lv-product__section-title{padding-left:4.6875vw;padding-right:4.6875vw}}@media screen and (min-width:90rem){[dir] .lv-product__section.-exclu-services .lv-product__section-title{padding-left:8.3333333333vw;padding-right:8.3333333333vw}}@media screen and (min-width:64rem){[dir] .lv-product__section.-exclu-services{padding:5rem .5rem}[dir] .lv-product__section.-exclu-services .lv-product__section-title{text-align:center}}.lv-product__section.-otherviews{align-items:stretch;display:flex;flex-direction:column}.lv-product__section.-otherviews header{flex:1 1 100%}.lv-product__section.-otherviews a{color:inherit;color:#000;font-size:1rem;font-size:1.125rem;font-weight:400;letter-spacing:.025rem;line-height:1.25rem;text-decoration:none}[dir] .lv-product__section.-otherviews a{box-shadow:0 2px 0 -1px currentColor;cursor:pointer;transition:color .3s cubic-bezier(.39,.575,.565,1)}.lv-product__section.-otherviews a:lang(ko),.lv-product__section.-otherviews a:lang(zh){font-size:.9rem}.lv-product__section.-otherviews a:lang(ja){font-size:.8rem}.lv-product__section.-otherviews a:lang(ja),.lv-product__section.-otherviews a:lang(ko),.lv-product__section.-otherviews a:lang(th),.lv-product__section.-otherviews a:lang(zh){font-style:normal;letter-spacing:0;line-height:normal}.lv-product__section.-otherviews a:lang(th){word-break:break-word}.lv-product__section.-otherviews a:lang(vi){line-height:1.3}@media (forced-colors:active){.lv-product__section.-otherviews a{text-decoration:underline}[dir] .lv-product__section.-otherviews a{box-shadow:none}}@media (-moz-touch-enabled:0),(-webkit-hover:hover),(hover:hover) and (pointer:fine){.lv-product__section.-otherviews a:hover{color:#0009}}.keyboard-is-used .lv-product__section.-otherviews a:focus{color:#0009}.lv-product__section.-otherviews a:disabled{color:#0006}[dir] .lv-product__section.-otherviews a:disabled{cursor:auto}.lv-product__section.-otherviews>div:not(.lv-product__section-media)>*+*{display:inline-block}@media screen and (min-width:64rem){.lv-product__section.-otherviews{align-items:flex-start;flex-flow:row wrap}[dir] .lv-product__section.-otherviews{padding:0 8.3333333333vw}[dir] .lv-product__section.-otherviews header{margin-bottom:6rem}[dir] .lv-product__section.-otherviews>*+*{margin-top:0}.lv-product__section.-otherviews>*{flex:1 1 50%}.lv-product__section.-otherviews>div:not(.lv-product__section-media){box-sizing:border-box;max-width:50%}.lv-product__section.-otherviews .lv-product__section-media{box-sizing:border-box;max-width:50%;position:relative}[dir=ltr] .lv-product__section.-otherviews .lv-product__section-media{padding:0 0 0 1rem}[dir=ltr] .lv-product__section.-otherviews .lv-product__section-main,[dir=rtl] .lv-product__section.-otherviews .lv-product__section-media{padding:0 1rem 0 0}[dir=rtl] .lv-product__section.-otherviews .lv-product__section-main{padding:0 0 0 1rem}.lv-product__section.-otherviews.-center{justify-content:center}.lv-product__section.-otherviews.-center>*{box-sizing:border-box}[dir=ltr] .lv-product__section.-otherviews.-center>*{margin-left:-6.4vw}[dir=rtl] .lv-product__section.-otherviews.-center>*{margin-right:-6.4vw}}@media screen and (min-width:64rem) and (min-width:48rem){[dir=ltr] .lv-product__section.-otherviews.-center>*{margin-left:-3.125vw}[dir=rtl] .lv-product__section.-otherviews.-center>*{margin-right:-3.125vw}}@media screen and (min-width:64rem) and (min-width:64rem){[dir=ltr] .lv-product__section.-otherviews.-center>*{margin-left:-4.6875vw}[dir=rtl] .lv-product__section.-otherviews.-center>*{margin-right:-4.6875vw}}@media screen and (min-width:64rem) and (min-width:90rem){[dir=ltr] .lv-product__section.-otherviews.-center>*{margin-left:-8.3333333333vw}[dir=rtl] .lv-product__section.-otherviews.-center>*{margin-right:-8.3333333333vw}}[dir=ltr] .lv-product__section.-otherviews.-center .lv-product__section-main{padding-left:8.3333333333%;padding-right:0}[dir=rtl] .lv-product__section.-otherviews.-center .lv-product__section-main{padding-left:0;padding-right:8.3333333333%}.lv-product__section.-services{align-items:center;display:flex;flex-direction:column}[dir] .lv-product__section.-services{padding-bottom:2.5rem}.lv-product__section.-services>*{flex:1 1 100%}.lv-product__section.-services header{justify-content:flex-start}[dir] .lv-product__section.-services header{padding:0}[dir] .lv-product__section.-services header h2{margin:0}@media screen and (min-width:64rem){.lv-product__section.-services{flex-flow:row wrap}.lv-product__section.-services>*+*{flex:1 1 50%;width:50%}}[dir] .lv-product__section.lv-product-page-craftsmanship{margin:2.5rem 0 0}@media screen and (min-width:64rem){[dir] .lv-product__section.lv-product-page-craftsmanship{margin-top:4rem}}[dir] .lv-product__section.lv-product-edito{margin:4rem 0 0}@media screen and (min-width:64rem){[dir] .lv-product__section.lv-product-edito{margin-top:0}}[dir] .lv-product__description{margin:0 0 1rem}[dir] .lv-product__detailed-features,[dir] .lv-product__information{margin-bottom:1.5rem}[dir] .lv-product__information .lv-product-detailed-information{border-top:1px solid #efefef}[dir] .lv-product__information .lv-product-detailed-information .lv-expandable-panel{border-bottom:1px solid #efefef}[dir] .lv-product__information .lv-product__details{margin-bottom:1.5rem}.lv-product__header-buttons{display:flex;flex-direction:column}[dir] .lv-product__header-buttons{margin-top:3rem}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button{color:inherit;color:#000;font-size:.875rem;font-weight:400;letter-spacing:.025rem;line-height:1rem;text-decoration:none}[dir] .lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button{box-shadow:0 2px 0 -1px currentColor;cursor:pointer;transition:color .3s cubic-bezier(.39,.575,.565,1)}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(ko),.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(zh){font-size:.7875rem}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(ja){font-size:.7rem;font-style:normal;letter-spacing:0;line-height:normal}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(ko),.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(th),.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(zh){font-style:normal;letter-spacing:0;line-height:normal}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(th){word-break:break-word}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:lang(vi){line-height:1.3}@media (forced-colors:active){.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button{text-decoration:underline}[dir] .lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button{box-shadow:none}}@media (-moz-touch-enabled:0),(-webkit-hover:hover),(hover:hover) and (pointer:fine){.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:hover{color:#0009}}.keyboard-is-used .lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:focus{color:#0009}.lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:disabled{color:#0006}[dir] .lv-product__header-buttons .lv-expandable-panel .lv-product__view-more-button:disabled{cursor:auto}[dir] .lv-product__header-buttons .lv-product-features-buttons{margin-top:0}[dir] .lv-product__header-buttons .lv-product-features-buttons .lv-product-features-buttons__button{margin:1rem 0 0}[dir] .lv-product__price{margin-bottom:1.5rem}[dir] .lv-product .lv-back-button,[dir] .lv-product .lv-video-loop__play-pause{margin:1rem}@media screen and (min-width:48rem){[dir=ltr] .lv-product .lv-back-button,[dir=ltr] .lv-product .lv-video-loop__play-pause{margin:1.5rem 1.5rem 1.5rem 3.125vw}[dir=rtl] .lv-product .lv-back-button,[dir=rtl] .lv-product .lv-video-loop__play-pause{margin:1.5rem 3.125vw 1.5rem 1.5rem}}@media screen and (min-width:64rem){[dir=ltr] .lv-product .lv-back-button,[dir=ltr] .lv-product .lv-video-loop__play-pause{margin:2.5rem 2.5rem 2.5rem 3.125vw}[dir=rtl] .lv-product .lv-back-button,[dir=rtl] .lv-product .lv-video-loop__play-pause{margin:2.5rem 3.125vw 2.5rem 2.5rem}}.lv-product .lv-back-button{position:absolute;top:0;z-index:3}[dir] .lv-product .lv-product-immersion+.lv-product-page-edito{margin:0 auto}[dir=ltr] .lv-product .lv-product-cross-sell .lv-tabs__panels{margin-right:0}[dir=rtl] .lv-product .lv-product-cross-sell .lv-tabs__panels{margin-left:0}[dir] .lv-product .lv-product-variations+.lv-product-personalization-panel{border-top:1px solid #e1e1e1}[dir] .lv-product .lv-product-variations:has(.lv-product-variations__size)+.lv-quantity{margin-top:1.5rem}[dir] .lv-product .lv-product-variations.-with-contextual-sizing+.lv-product-personalization{margin-top:1rem}[dir] .lv-product .lv-product-sourcing+.lv-product-personalization{margin-top:.5rem}.-header-is-immersive .lv-product .lv-product-page-header .lv-back-button{top:2.5rem}@media screen and (min-width:48rem){.-header-is-immersive .lv-product .lv-product-page-header .lv-back-button{top:4rem}}@media screen and (min-width:64rem){.-header-is-immersive .lv-product .lv-product-page-header .lv-back-button{top:3rem}}.lv-product__highend-perso-container{height:100vh;position:relative}.lv-product__highend-perso-iframe{height:100%;width:100%}.lv-product.-highend{display:block;min-height:calc(var(--vh, 1vh)*100 - 3.5rem);position:relative}@media screen and (min-width:64rem){.lv-product.-highend{min-height:calc(var(--vh, 1vh)*100 - 5.5rem)}}`)})();
import{_ as E}from"./rollup-vendor-Csqo9Ap5.js";import{_ as B,aq as D,C as G,G as $,H as l,K as O,L as p,Y as P,a5 as F,U as _,a9 as K,J as M,T as q,a4 as Q,a0 as Y,V as J,g2 as X,g3 as Z,N as V,bs as z,M as W,I as ee,g4 as te,g5 as j,bi as ie,eU as se,g6 as oe,g7 as ae,aR as ne,cN as re,F as ce}from"./layout-DywyNxr9.js";import{Z as de,$ as ue,a0 as v,a1 as he,a2 as R}from"./pages/products-legacy/_id_/index.vue-DyyBl88G.js";import"./nuxt-comp-BrT_0Nqp.js";const x=[{label:"identification",getter:se},{label:"shipping",getter:oe},{label:"payment",getter:ae}],le={name:"SurveyUser",emits:["closed","submitted"],components:{Modal:G,Loader:D(()=>E(()=>import("./layout-DywyNxr9.js").then(e=>e.na),__vite__mapDeps([0,1,2]),import.meta.url)),Icon:D(()=>E(()=>import("./layout-DywyNxr9.js").then(e=>e.m_),__vite__mapDeps([0,1,2]),import.meta.url))},props:{isFeedbackSurvey:{type:Boolean,default:!1},skuId:{type:String,default:null},currentPage:{type:String,default:""}},setup(){const{openNotification:e,closeNotification:t}=re(),{sendTrackingData:i}=ce();return{openNotification:e,closeNotification:t,sendTrackingData:i}},data(){return{modalTrigger:null,isSurveyOpened:!1,showNotification:!1,svcChatDisplayed:!1,timer:null,stepsDone:!1,isLoading:!0,ModalType:ne}},computed:{activeCheckoutStep(){const e=x.find(i=>!this.$store.getters[i.getter])||{},t=x.every(i=>this.$store.getters[i.getter])&&"review";return e.label||t},timout(){return this.$appConfig.diduenjoy_abandoned_checkout_timeout_ms},isChatAvailable(){return this.$store.state.isCscChatAvailable||this.svcChatDisplayed},isCartEmpty(){return!this.$store.state.cart.itemsCount},isLogged(){return this.$store.state.userContext.userIsLogged},isChina(){return this.$store.getters[ie]},url(){var w,L,T;const e=this.isFeedbackSurvey?this.$appConfig.diduenjoy_voice_plp_pdp_survey_id:this.$appConfig.diduenjoy_abandoned_checkout_survey_id,t=this.isChina?this.$appConfig.diduenjoy_abandoned_checkout_url_china:this.$appConfig.diduenjoy_abandoned_checkout_url;if(!e||!t)return null;const{rmsStoreCode:i,giftCardMessage:d="",items:s=[],identifier:o,shippingGroups:n=[{}],paymentGroups:r=[{}]}=this.$store.state.cart,{countryCodeIso3:u,localeForDidUEnjoy:h}=te(this.$store.state.localeContext.dispatchLocale),c=this.$store.state.configuration.requestingLocationMap||i||u,{login:g,identifier:y}=this.$store.state.userContext,H=this.isChina?j.ClientMobilePhoneNumber:j.ref_mail,{shippingMethod:f,shippingMethodName:C}=n[0],{paymentMethod:k}=r[0],S=sessionStorage.getItem("_cs_rl_du"),b=s.map(({name:a}={})=>a).join(","),A=s.map(({identifier:a}={})=>a).join(","),N=s.map(({categoryName:a}={})=>a).join(", ").replace(/, +/g,", "),I=[...new Set(s.map(a=>a.macroFamilySap).filter(Boolean))].join(",");let m={position:1,website_id:c,device_id:((w=window==null?void 0:window.utag_data)==null?void 0:w.deviceId)||"",...!this.isFeedbackSurvey&&{touchpoint:"Cart abandonment"},store_type:"louisvuitton.com",country_code:u,locale:h,gift:!!d,communication_channel:this.communicationChannel,...o&&{order_id:o},...y&&{profile_id:y},...this.activeCheckoutStep&&{checkout_step:this.activeCheckoutStep},...b&&{sku_name:b},...A&&{sku_code:A},...N&&{category_name:N},...g&&{[H]:g},...f&&{shipping_method:f},...C&&{shipping_method_name:C},...k&&{payment_method:k},...S&&{contentsquare_replay_link:S},...I&&{macro_family:I},...this.isLogged&&{client_first_name:this.$store.state.userContext.firstName,client_last_name:this.$store.state.userContext.lastName,client_mobile_phone_number:(T=(L=this.$store.state.userContext)==null?void 0:L.mainAddress)==null?void 0:T.displayPhoneNumber}};this.isFeedbackSurvey&&(m={...m,browser:window.navigator.userAgent,website_page:window.location.href});const U=new URLSearchParams(m);return`${t}/${h}/${e}?${U}`},isCheckoutAbandonmentActive(){const e=this.$store.state.configuration.enableCartAbandonmentPoPin,t=!!this.$appConfig.diduenjoy_abandoned_checkout_survey_id;return e&&t},isLVApp(){return this.$store.getters[ee](this)},isSmall(){return this.$store.getters[W]("m")},showOnDesktop(){return this.$appConfig.diduenjoy_abandoned_hide_desktop==="ON"?this.isSmall:!0},showOnMobile(){return this.$appConfig.diduenjoy_abandoned_hide_mobile==="ON"?!this.isSmall:!0},hasSurvey(){var o,n;const e=this.currentPage===V.Homepage,t=this.$appConfig.is_OOB,i=(o=(this._.provides[z]||this.$route).params)==null?void 0:o.sku,d=i&&((n=this.$store.state.cart.items)==null?void 0:n.some(({identifier:r}={})=>r===i)),s=this.isLVApp&&this.$appConfig.diduenjoy_lvapp_enable==="ON";return!(this.isChatAvailable||s||!this.showNotification||this.stepsDone||!this.isCheckoutAbandonmentActive||t||!this.showOnDesktop||!this.showOnMobile||e||d||this.isCartEmpty)},communicationChannel(){return this.isLVApp?R.LvApp:R.LvCom},trackingDataFeedback(){return{categoryGa:this.skuId?"product_sheet":"product_list",pageType:this.skuId?"product_sheet":"product_list",...this.skuId&&{labelGa:this.skuId}}}},watch:{$route:{deep:!0,handler(){this.startExperience()}},isChatAvailable:{deep:!0,handler(){this.startExperience()}},isSmall:{deep:!0,handler(){this.startExperience()}}},mounted(){this.isFeedbackSurvey&&this.openSurvey(),this.startExperience(),window.addEventListener("message",this.getStepData)},unmounted(){this.closeAbandonedCheckoutNotification()},beforeUnmount(){window.removeEventListener("message",this.getStepData)},methods:{async waitForSvcChat(){try{await he(()=>!!window.embedded_svc),window.embedded_svc.addEventHandler("onAvailability",e=>{this.svcChatDisplayed=e.isAgentAvailable})}catch{this.svcChatDisplayed=!1}},startExperience(){if(this.currentPage===V.CheckoutStep){sessionStorage.setItem("LV.isCheckoutSurveyActive","true"),this.showNotification=!0,this.closeNotification(),document.addEventListener("mousemove",this.resetInactiveTime),document.addEventListener("keydown",this.resetInactiveTime),document.addEventListener("scroll",this.resetInactiveTime),this.resetInactiveTime();return}const e=!!sessionStorage.getItem("LV.isCheckoutSurveyActive");this.showNotification=e,this.handleNotificationCheckoutSurvey(),document.removeEventListener("mousemove",this.resetInactiveTime),document.removeEventListener("keydown",this.resetInactiveTime),document.removeEventListener("scroll",this.resetInactiveTime)},async handleNotificationCheckoutSurvey(){await this.waitForSvcChat(),this.hasSurvey&&(this.showNotification=!0,this.triggerNotification())},loadFrame(){this.isLoading=!1},triggerNotification(){const e={align:Z.Right,cta:{label:this.$t("cart_abandonment_modal_description"),action:this.openSurvey},closeCallback:this.closeAbandonedCheckoutNotification,hideBackdrop:!0,message:this.$t("cart_abandonment_modal_title"),persistDisplay:!0,position:X.Bottom,sticky:!0,iconName:"icon-lv"};this.openNotification(e),this.trackNotificationOpen()},openSurvey(){this.isSurveyOpened=!0,this.isLoading=!0,this.closeNotification(),this.track(v.Open)},closeAbandonedCheckoutNotification(){this.showNotification=!1,sessionStorage.removeItem("LV.isCheckoutSurveyActive"),this.closeNotification(),this.track(v.Close)},closeSurvey(){this.isSurveyOpened=!1,this.$emit("closed"),this.handleNotificationCheckoutSurvey()},startInactiveTimer(){this.timer=setTimeout(()=>{this.showNotification=!0,this.handleNotificationCheckoutSurvey()},this.timout)},resetInactiveTime(){this.timer&&clearTimeout(this.timer),this.startInactiveTimer()},getStepData(e={}){const{data:t={}}=e,{due_state:i={}}=t;i&&i.current_step===3&&(this.stepsDone=!0,window.removeEventListener("message",this.getStepData),sessionStorage.removeItem("LV.isCheckoutSurveyActive"),this.track(v.Submit),this.$emit("submitted"))},trackNotificationOpen(){this.sendTrackingData({categoryGa:"popin_cart_abandonment",actionGa:"popin_displayed"})},track(e){const t=this.getTrackingData(e);this.sendTrackingData(t)},getTrackingData(e){return this.isFeedbackSurvey?{...de[e],...this.trackingDataFeedback}:ue[e]}}},me={class:"lv-survey-user"},pe=["title","src"],_e={key:1,class:"lv-survey-user__thank-section"};function ve(e,t,i,d,s,o){const n=_("Loader"),r=_("Icon"),u=_("Modal"),h=Q("safe-html");return l(),$("div",me,[s.isSurveyOpened?(l(),O(u,{key:0,type:s.ModalType.SidePanel,"modal-class":"lv-survey-user__modal",onTriggerElementChanged:t[1]||(t[1]=c=>s.modalTrigger=c),onClosed:o.closeSurvey},{title:P(()=>[Y(J(e.$t("cart_abandonment_modal_title")),1)]),default:P(()=>[s.isLoading?(l(),O(n,{key:0})):p("",!0),F(M("iframe",{class:"lv-survey-user__iframe",title:e.$t("cart_abandonment_modal_title"),name:"surveyDue",src:o.url,onLoad:t[0]||(t[0]=(...c)=>o.loadFrame&&o.loadFrame(...c))},null,40,pe),[[K,!s.isLoading&&o.url&&!s.stepsDone]]),s.stepsDone?(l(),$("div",_e,[q(r,{name:"icon-lv",class:"lv-icon"}),F(M("p",null,null,512),[[h,{inline:!0,html:i.isFeedbackSurvey?e.$t("voice_plp_thank_you_page_description"):e.$t("cart_abandonment_thank_you_page_description")}]])])):p("",!0)]),_:1},8,["type","onClosed"])):p("",!0)])}const Se=B(le,[["render",ve]]);export{x as STEPS,Se as default};
//# sourceMappingURL=SurveyUser-DmRk6mIm.js.map
